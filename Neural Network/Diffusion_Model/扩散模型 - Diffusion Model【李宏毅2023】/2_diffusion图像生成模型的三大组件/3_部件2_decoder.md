
>[!warning] 提示
>点击右上角「书本」![[Pasted image 20231125105318.png]]图标, 进入阅读模式, 以获得更好的阅读体验！

# Decoder的功能

1. Decoder, 中间图像解码器, 后期处理过程
	1. 输入：中间图像
	2. 输出：最终图像
	3. 主要功能：将中间图像解码为人类可以理解的最终图像
		1. 可以看作是[[2_denoise过程介绍|denoise过程]]的后期处理, 将[[2_denoise过程介绍|denoise过程]]的结果数据处理成「人类看得懂的样子」

图中绿色模块为decoder
- ![[Pasted image 20231221203950.png|474]]

# Decoder的训练

训练的问题实际上是需要什么数据作为训练集的问题.

1. 分析一下, 我们应该用什么样的数据给Decoder训练？
	1. decoder以Generation model生成的**中间图像**为**输入**
	2. 以人类能理解的**最终图像**作为**输出**
2. 初步结论
	1. 那么我们的训练数据应该就是成对的「中间图像与最终图像」. 
3. 一个问题
	1. 但是中间图像可能有两种情况
		1. 一是Generation model生成的中间图像是一张“缩略图”
		2. 二是Generation model生成的中间图像是一张“特征图像”
	2. 那么我们就应该分情况考虑了

## 如果Generation model生成的中间图像是一张“缩略图”

此时我们需要成对的如下数据作为训练数据
1. Generation model生成的中间图像--“缩略图”
2. 与缩略图对应的“最终图像”

那么我们可以这么创建训练集
1. 找到一些图像
	1. ![[Pasted image 20231221215758.png|266]]
2. 将他们变为小的“缩略图” 
	1. ![[Pasted image 20231221215821.png|266]]
3. 这样就得到了成对的数据集, 这就是训练集
4. 将这个训练集给decoder训练即可, 我们需要decoder生成的最终图像与原图越接近越好

## 如果Generation model生成的中间图像是一张“特征图像”

此时我们需要成对的如下数据作为训练数据
1. Generation model生成的中间图像--“特征图像”
2. 与特征图像对应的“最终图像”

那么我们可以这么创建训练集
1. 找到一些图像
	1. ![[Pasted image 20231221220042.png]]
2. 让他们通过某种体征提取器变为“特征图像”
	1. ![[Pasted image 20231221220050.png]]
3. 这样就得到了成对的数据集, 这就是训练集
4. 将这个训练集给decoder训练即可, 我们需要decoder生成的最终图像与原图越接近越好
	1. ![[Pasted image 20231221220144.png]]